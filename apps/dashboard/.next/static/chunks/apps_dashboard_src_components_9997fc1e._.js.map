{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,0SAAgB,MAG5B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QAAI,WAAU;kBACb,cAAA,4TAAC;YACC,KAAK;YACL,WAAW,IAAA,iJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,0SAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QAAM,KAAK;QAAK,WAAW,IAAA,iJAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,0SAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,0SAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,0SAAgB,OAG/B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,0SAAgB,QAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EACX,0IACA;QAED,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,0SAAgB,QAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EACX,wFACA;QAED,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,0SAAgB,QAGnC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,0SAAgB,MAG/B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,4TAAC,gYAAsB;QACrB,KAAK;QACL,WAAW,IAAA,iJAAE,EACX,sQACA;QAED,GAAG,KAAK;kBAET,cAAA,4TAAC,qYAA2B;YAC1B,WAAW,IAAA,iJAAE,EAAC;sBAEd,cAAA,4TAAC,oSAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,gYAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/financials/financials-table.tsx"],"sourcesContent":["\"use client\"\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport React, { useMemo, useState } from \"react\";\nimport { ChevronDown, ChevronRight, Trash2 } from \"lucide-react\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { toast } from \"sonner\";\n\n// Types\ninterface AccountItemRow {\n  id: string;\n  name: string;\n  parent_id: string | null;\n  children: AccountItemRow[];\n  display_order: number;\n}\n\ninterface Header {\n  key: string;\n  label: string;\n}\n\ninterface AggregatedData {\n  [itemId: string]: {\n    [headerKey: string]: {\n      budget: number;\n      actual: number;\n    };\n  };\n}\n\ninterface FinancialsTableProps {\n  headers: Header[];\n  rows: AccountItemRow[];\n  data: AggregatedData;\n  viewMode?: 'all' | 'budget' | 'actual';\n  onDataChange?: () => void;\n}\n\nconst formatNumber = (num: number) => new Intl.NumberFormat('ja-JP').format(num);\n\nconst DataRow: React.FC<{ \n  item: AccountItemRow;\n  headers: Header[];\n  data: AggregatedData;\n  viewMode: 'all' | 'budget' | 'actual';\n  level: number;\n  expandedRows: Set<string>;\n  toggleRow: (id: string) => void;\n  selectedItems: Set<string>;\n  toggleItemSelection: (id: string) => void;\n  handleDeleteItem: (id: string, name: string) => void;\n  isDeleting: boolean;\n}> = ({ item, headers, data, viewMode, level, expandedRows, toggleRow, selectedItems, toggleItemSelection, handleDeleteItem, isDeleting }) => {\n  const isExpanded = expandedRows.has(item.id);\n\n  return (\n    <React.Fragment>\n      <TableRow className={level === 0 ? \"font-bold bg-muted hover:bg-muted/90\" : \"hover:bg-muted/50\"}>\n        <TableCell \n          className={`sticky left-0 z-10 whitespace-nowrap ${level === 0 ? 'bg-muted' : 'bg-background'}`}\n          style={{ paddingLeft: `${1 + level * 1.5}rem` }}\n        >\n          <div className=\"flex items-center gap-2\">\n            <Checkbox\n              checked={selectedItems.has(item.id)}\n              onCheckedChange={() => toggleItemSelection(item.id)}\n            />\n            {item.children.length > 0 ? (\n              <Button variant=\"ghost\" size=\"icon\" onClick={() => toggleRow(item.id)} className=\"h-8 w-8\">\n                {isExpanded ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronRight className=\"h-4 w-4\" />}\n              </Button>\n            ) : (\n              <span className=\"w-8 h-8\" /> // Placeholder for alignment\n            )}\n            <span>{item.name}</span>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-6 w-6 opacity-60 hover:opacity-100\"\n              onClick={() => handleDeleteItem(item.id, item.name)}\n              disabled={isDeleting}\n            >\n              <Trash2 className=\"h-3 w-3\" />\n            </Button>\n          </div>\n        </TableCell>\n        {headers.map(header => {\n          const cellData = data[item.id]?.[header.key] || { budget: 0, actual: 0 };\n          const budget = cellData.budget;\n          const actual = cellData.actual;\n          const difference = actual - budget;\n          const achievementRate = budget === 0 ? 0 : (actual / budget) * 100;\n\n          return (\n            <React.Fragment key={header.key}>\n              {(viewMode === 'all' || viewMode === 'budget') && (\n                <TableCell className=\"text-right font-mono border-l whitespace-nowrap px-2\">{formatNumber(budget)}</TableCell>\n              )}\n              {(viewMode === 'all' || viewMode === 'actual') && (\n                <TableCell className={`text-right font-mono whitespace-nowrap px-2 ${viewMode === 'actual' ? 'border-l' : ''}`}>{formatNumber(actual)}</TableCell>\n              )}\n              {viewMode === 'all' && (\n                <>\n                  <TableCell className=\"text-right font-mono whitespace-nowrap px-2\">{formatNumber(difference)}</TableCell>\n                  <TableCell className=\"text-right font-mono border-r whitespace-nowrap px-2\">{achievementRate.toFixed(0)}%</TableCell>\n                </>\n              )}\n            </React.Fragment>\n          );\n        })}\n      </TableRow>\n      {isExpanded && item.children.map(child => (\n        <DataRow\n          key={child.id}\n          item={child}\n          headers={headers}\n          data={data}\n          viewMode={viewMode}\n          level={level + 1}\n          expandedRows={expandedRows}\n          toggleRow={toggleRow}\n          selectedItems={selectedItems}\n          toggleItemSelection={toggleItemSelection}\n          handleDeleteItem={handleDeleteItem}\n          isDeleting={isDeleting}\n        />\n      ))}\n    </React.Fragment>\n  );\n};\n\nexport default function FinancialsTable({\n  headers,\n  rows,\n  data,\n  viewMode = 'all',\n  onDataChange,\n}: FinancialsTableProps) {\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(() => new Set(rows.map(r => r.id)));\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const allItemIds = useMemo(() => {\n    const ids = new Set<string>();\n    const collectIds = (items: AccountItemRow[]) => {\n      items.forEach(item => {\n        ids.add(item.id);\n        if (item.children.length > 0) {\n          collectIds(item.children);\n        }\n      });\n    };\n    collectIds(rows);\n    return ids;\n  }, [rows]);\n\n  const toggleRow = (id: string) => {\n    setExpandedRows(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) newSet.delete(id); else newSet.add(id);\n      return newSet;\n    });\n  };\n\n  const toggleItemSelection = (id: string) => {\n    setSelectedItems(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) newSet.delete(id); else newSet.add(id);\n      return newSet;\n    });\n  };\n\n  const toggleSelectAll = () => {\n    if (selectedItems.size > 0) {\n      setSelectedItems(new Set());\n    } else {\n      setSelectedItems(allItemIds);\n    }\n  };\n\n  const handleDeleteSelected = async () => {\n    if (selectedItems.size === 0) return toast.error(\"削除する項目を選択してください。\");\n    if (!confirm(`選択した${selectedItems.size}件の項目を削除しますか？`)) return;\n\n    setIsDeleting(true);\n    try {\n      const response = await fetch('/api/account-items/delete', { /* API endpoint might need review */\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ itemIds: Array.from(selectedItems) }),\n      });\n      if (!response.ok) throw new Error('Delete failed');\n      toast.success(\"項目を削除しました。\");\n      setSelectedItems(new Set());\n      onDataChange?.();\n    } catch (error) {\n      toast.error(\"削除に失敗しました。\");\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleDeleteItem = async (id: string, name: string) => {\n    if (!confirm(`「${name}」を削除しますか？`)) return;\n    // Similar logic to handleDeleteSelected\n  };\n\n  const getColSpan = () => {\n    if (viewMode === 'all') return 4;\n    if (viewMode === 'budget' || viewMode === 'actual') return 1;\n    return 4;\n  };\n\n  return (\n    <div className=\"bg-background rounded-lg overflow-x-auto\">\n      {selectedItems.size > 0 && (\n        <div className=\"p-4 bg-muted flex items-center justify-between\">\n          <span className=\"text-sm font-medium\">{selectedItems.size}件選択中</span>\n          <Button variant=\"destructive\" size=\"sm\" onClick={handleDeleteSelected} disabled={isDeleting}>\n            <Trash2 className=\"h-4 w-4 mr-2\" />\n            選択項目を削除\n          </Button>\n        </div>\n      )}\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHead rowSpan={2} className=\"w-[250px] min-w-[250px] sticky left-0 bg-background z-10 align-middle border-b\">\n              <div className=\"flex items-center gap-2\">\n                <Checkbox\n                  checked={selectedItems.size > 0 && selectedItems.size === allItemIds.size}\n                  onCheckedChange={toggleSelectAll}\n                />\n                勘定項目\n              </div>\n            </TableHead>\n            {headers.map(header => (\n              <TableHead key={header.key} colSpan={getColSpan()} className=\"text-center border-l font-bold\">\n                {header.label}\n              </TableHead>\n            ))}\n          </TableRow>\n          <TableRow>\n            {headers.map(header => (\n              <React.Fragment key={header.key}>\n                {(viewMode === 'all' || viewMode === 'budget') && <TableHead className=\"min-w-[100px] text-right font-normal text-xs border-l whitespace-nowrap px-2\">予算</TableHead>}\n                {(viewMode === 'all' || viewMode === 'actual') && <TableHead className={`min-w-[100px] text-right font-normal text-xs whitespace-nowrap px-2 ${viewMode === 'actual' ? 'border-l' : ''}`}>実績</TableHead>}\n                {viewMode === 'all' && (\n                  <>\n                    <TableHead className=\"min-w-[100px] text-right font-normal text-xs whitespace-nowrap px-2\">差異</TableHead>\n                    <TableHead className=\"min-w-[100px] text-right font-normal text-xs border-r whitespace-nowrap px-2\">達成率</TableHead>\n                  </>\n                )}\n              </React.Fragment>\n            ))}\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {rows.map(item => (\n            <DataRow\n              key={item.id}\n              item={item}\n              headers={headers}\n              data={data}\n              viewMode={viewMode}\n              level={0}\n              expandedRows={expandedRows}\n              toggleRow={toggleRow}\n              selectedItems={selectedItems}\n              toggleItemSelection={toggleItemSelection}\n              handleDeleteItem={handleDeleteItem}\n              isDeleting={isDeleting}\n            />\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,+XAAqB;AAErC,MAAM,iBAAiB,kYAAwB;AAE/C,MAAM,gBAAgB,iYAAuB;AAE7C,MAAM,+BAAiB,0SAAgB,MAGrC,QAA4D;QAA3D,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO;yBAC1D,4TAAC,iYAAuB;kBACtB,cAAA,4TAAC,kYAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,iJAAE,EACX,geACA;YAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,kYAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 763, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/financials/account-items-import.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload, Download } from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { toast } from \"sonner\";\nimport { FinancialSummary } from \"@/lib/mock-data/financial-summary\";\n\ntype TransformedDataItem = {\n  id: string;\n  name: string;\n  parentId: string | null;\n  displayOrder: number;\n  children: TransformedDataItem[];\n  monthlyData: { [month: number]: { budget: number; actual: number } };\n};\n\nconst transformDataForExport = (data: FinancialSummary[]): TransformedDataItem[] => {\n  const itemsById = new Map<string, TransformedDataItem>();\n  const rootItems: TransformedDataItem[] = [];\n\n  if (!data) return [];\n\n  data.forEach(item => {\n    if (!itemsById.has(item.account_item_id)) {\n      itemsById.set(item.account_item_id, {\n        id: item.account_item_id,\n        name: item.account_item_name,\n        parentId: item.parent_id,\n        displayOrder: item.display_order,\n        children: [],\n        monthlyData: {},\n      });\n    }\n    const currentItem = itemsById.get(item.account_item_id)!;\n    currentItem.monthlyData[item.month] = {\n      budget: item.total_budget,\n      actual: item.total_actual,\n    };\n  });\n\n  itemsById.forEach((item) => {\n    if (item.parentId && itemsById.has(item.parentId)) {\n      const parent = itemsById.get(item.parentId)!;\n      parent.children.push(item);\n    } else {\n      rootItems.push(item);\n    }\n  });\n  \n  rootItems.forEach(item => {\n    item.children.sort((a, b) => a.displayOrder - b.displayOrder);\n  });\n\n  return rootItems.sort((a, b) => a.displayOrder - b.displayOrder);\n};\n\n\ninterface ParsedCSVData {\n  mode: 'both' | 'budget' | 'actual';\n  months: number[];\n  items: {\n    parent: string;\n    account_item: string;\n    values: { year: number; month: number; budget: number | null; actual: number | null }[];\n  }[];\n}\n\ninterface AccountItemsImportProps {\n  mediaId: string;\n  onImportComplete: () => void;\n  dataToExport: FinancialSummary[];\n  selectedYear: number;\n  fiscalYearStartMonth: number;\n}\n\nexport default function AccountItemsImport({ mediaId, onImportComplete, dataToExport, selectedYear, fiscalYearStartMonth }: AccountItemsImportProps) {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [parsedData, setParsedData] = useState<ParsedCSVData | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadType, setUploadType] = useState<'budget' | 'actual'>('budget');\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>, type: 'budget' | 'actual') => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setUploadType(type);\n\n    try {\n      const text = await file.text();\n      const lines = text.trim().split('\\n');\n\n      if (lines.length < 2) {\n        toast.error(\"ファイルが空です。\");\n        return;\n      }\n\n      const isTSV = file.name.endsWith('.tsv') || lines[0].includes('\\t');\n      const delimiter = isTSV ? '\\t' : ',';\n\n      if (!isTSV) {\n        toast.warning(\"CSV形式を検出しました。数値にカンマ（,）が含まれていないか確認してください。推奨形式: TSV\", {\n          duration: 5000,\n        });\n      }\n\n      const headers = lines[0].split(delimiter).map(s => s.trim());\n      const dataLines = lines.slice(1);\n\n      let mode: 'both' | 'budget' | 'actual' = 'budget';\n      const months: number[] = [];\n\n      const hasBudget = headers.some(h => h.includes('予算'));\n      const hasActual = headers.some(h => h.includes('実績'));\n\n      if (hasBudget && hasActual) {\n        mode = 'both';\n        headers.slice(2).forEach(h => {\n          const match = h.match(/(\\d+)月/);\n          if (match && !months.includes(parseInt(match[1]))) {\n            months.push(parseInt(match[1]));\n          }\n        });\n      } else {\n        mode = type;\n        headers.slice(2).forEach(h => {\n          const match = h.match(/(\\d+)月/);\n          if (match) {\n            months.push(parseInt(match[1]));\n          }\n        });\n      }\n\n      const items = dataLines.map(line => {\n        const cells = line.split(delimiter).map(s => s.trim());\n        const parent = cells[0];\n        const account_item = cells[1];\n        const values: { year: number; month: number; budget: number | null; actual: number | null }[] = [];\n\n        if (mode === 'both') {\n          months.forEach((month, idx) => {\n            const year = month < fiscalYearStartMonth ? selectedYear + 1 : selectedYear;\n            const budgetValue = parseFloat(cells[2 + idx * 2]?.replace(/,/g, '') || '0') || 0;\n            const actualValue = parseFloat(cells[2 + idx * 2 + 1]?.replace(/,/g, '') || '0') || 0;\n            values.push({ year, month, budget: budgetValue, actual: actualValue });\n          });\n        } else {\n          months.forEach((month, idx) => {\n            const year = month < fiscalYearStartMonth ? selectedYear + 1 : selectedYear;\n            const value = parseFloat(cells[2 + idx]?.replace(/,/g, '') || '0') || 0;\n            if (mode === 'budget') {\n              values.push({ year, month, budget: value, actual: null });\n            } else {\n              values.push({ year, month, budget: null, actual: value });\n            }\n          });\n        }\n        return { parent, account_item, values };\n      });\n\n      const errors = items.filter(item => !item.account_item || !item.parent);\n      if (errors.length > 0) {\n        toast.error(\"ファイルの形式が正しくありません。勘定項目名と親項目は必須です。\");\n        return;\n      }\n\n      setParsedData({ mode, months, items });\n      setIsDialogOpen(true);\n    } catch (error) {\n      console.error(\"File parse error:\", error);\n      toast.error(\"ファイルの読み込みに失敗しました。\");\n    }\n\n    event.target.value = '';\n  };\n\n  const handleDownloadTemplate = (type: 'both' | 'budget' | 'actual') => {\n    let tsvContent = '';\n\n    if (type === 'both') {\n      tsvContent = `parent\\taccount_item\\t4月予算\\t4月実績\\t5月予算\\t5月実績\\t6月予算\\t6月実績\\n売上\\t広告収入\\t1,000,000\\t950,000\\t1,200,000\\t1,100,000\\t1,100,000\\t1,050,000\\n売上\\t制作収入\\t500,000\\t480,000\\t550,000\\t520,000\\t600,000\\t580,000\\n費用\\t人件費\\t800,000\\t800,000\\t800,000\\t800,000\\t800,000\\t800,000\\n費用\\t広告費\\t300,000\\t280,000\\t350,000\\t320,000\\t400,000\\t380,000`;\n    } else if (type === 'budget') {\n      tsvContent = `parent\\taccount_item\\t4月\\t5月\\t6月\\t7月\\t8月\\t9月\\n売上\\t広告収入\\t1,000,000\\t1,200,000\\t1,100,000\\t1,300,000\\t1,400,000\\t1,500,000\\n売上\\t制作収入\\t500,000\\t550,000\\t600,000\\t650,000\\t700,000\\t750,000\\n費用\\t人件費\\t800,000\\t800,000\\t800,000\\t800,000\\t800,000\\t800,000\\n費用\\t広告費\\t300,000\\t350,000\\t400,000\\t450,000\\t500,000\\t550,000`;\n    } else {\n      tsvContent = `parent\\taccount_item\\t4月\\t5月\\t6月\\t7月\\t8月\\t9月\\n売上\\t広告収入\\t950,000\\t1,100,000\\t1,050,000\\t1,250,000\\t1,350,000\\t1,450,000\\n売上\\t制作収入\\t480,000\\t520,000\\t580,000\\t620,000\\t680,000\\t720,000\\n費用\\t人件費\\t800,000\\t800,000\\t800,000\\t800,000\\t800,000\\t800,000\\n費用\\t広告費\\t280,000\\t320,000\\t380,000\\t420,000\\t480,000\\t520,000`;\n    }\n\n    const blob = new Blob([tsvContent], { type: 'text/tab-separated-values;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n\n    const filename = type === 'both'\n      ? 'budget_actual_template.tsv'\n      : type === 'budget'\n        ? 'budget_template.tsv'\n        : 'actual_template.tsv';\n\n    link.setAttribute('href', url);\n    link.setAttribute('download', filename);\n    link.style.visibility = 'hidden';\n\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    URL.revokeObjectURL(url);\n  };\n\n  const handleImport = async () => {\n    if (mediaId === 'all') {\n      toast.error(\"メディアを選択してください。\");\n      return;\n    }\n\n    if (!parsedData) {\n      toast.error(\"データがありません。\");\n      return;\n    }\n\n    setIsUploading(true);\n    try {\n      const response = await fetch('/api/financials/import', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          mediaId,\n          items: parsedData.items,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Import failed');\n      }\n\n      toast.success(\"データをインポートしました。\");\n\n      setIsDialogOpen(false);\n      setParsedData(null);\n      onImportComplete();\n    } catch (error) {\n      console.error(\"Import error:\", error);\n      toast.error(error instanceof Error ? error.message : \"インポートに失敗しました。\");\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleExportCurrentData = () => {\n    if (!dataToExport || dataToExport.length === 0) {\n      toast.error(\"エクスポートするデータがありません。\");\n      return;\n    }\n\n    const transformedData = transformDataForExport(dataToExport);\n    \n    const allMonths = [...new Set(dataToExport.map(d => d.month))].sort((a, b) => a - b);\n\n    const header = [\n      \"parent\",\n      \"account_item\",\n      ...allMonths.flatMap(month => [`${month}月予算`, `${month}月実績`])\n    ].join('\\t');\n\n    const rows = transformedData.flatMap(parent => {\n      const parentRow = [\n        \"\",\n        parent.name,\n        ...allMonths.flatMap(month => {\n          const data = parent.monthlyData[month] || { budget: 0, actual: 0 };\n          return [data.budget, data.actual];\n        })\n      ].join('\\t');\n\n      const childRows = parent.children.map(child => {\n        return [\n          parent.name,\n          child.name,\n          ...allMonths.flatMap(month => {\n            const data = child.monthlyData[month] || { budget: 0, actual: 0 };\n            return [data.budget, data.actual];\n          })\n        ].join('\\t');\n      });\n\n      return [parentRow, ...childRows];\n    });\n\n    const tsvContent = [header, ...rows].join('\\n');\n\n    const blob = new Blob([tsvContent], { type: 'text/tab-separated-values;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    const filename = `financial_data_${mediaId}_${new Date().toISOString().split('T')[0]}.tsv`;\n\n    link.setAttribute('href', url);\n    link.setAttribute('download', filename);\n    link.style.visibility = 'hidden';\n\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    URL.revokeObjectURL(url);\n    toast.success(\"データのエクスポートが完了しました。\");\n  };\n\n  return (\n    <>\n      <div className=\"flex items-center gap-2\">\n        {/* Template Downloads & Export */}\n        <Popover>\n          <PopoverTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\" className=\"h-8 gap-2\">\n              <Download className=\"h-4 w-4\" />\n              ダウンロード\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-60\" align=\"start\">\n            <div className=\"space-y-1\">\n              <h4 className=\"font-medium text-sm px-2 pt-1.5 pb-1\">現在のデータをエクスポート</h4>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"w-full justify-start\"\n                onClick={handleExportCurrentData}\n              >\n                TSV形式でエクスポート\n              </Button>\n\n              <hr className=\"my-2\" />\n\n              <h4 className=\"font-medium text-sm px-2 pt-1.5 pb-1\">空のテンプレート</h4>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"w-full justify-start\"\n                onClick={() => handleDownloadTemplate('both')}\n              >\n                予算・実績両方 (TSV)\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"w-full justify-start\"\n                onClick={() => handleDownloadTemplate('budget')}\n              >\n                予算のみ (TSV)\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"w-full justify-start\"\n                onClick={() => handleDownloadTemplate('actual')}\n              >\n                実績のみ (TSV)\n              </Button>\n            </div>\n          </PopoverContent>\n        </Popover>\n\n        {/* Upload Buttons */}\n        <Popover>\n          <PopoverTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\" className=\"h-8 gap-2\">\n              <Upload className=\"h-4 w-4\" />\n              インポート\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-56\" align=\"start\">\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-sm mb-2\">インポート種類</h4>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"w-full justify-start\"\n                onClick={() => document.getElementById('csv-upload-budget')?.click()}\n              >\n                予算データ\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"w-full justify-start\"\n                onClick={() => document.getElementById('csv-upload-actual')?.click()}\n              >\n                実績データ\n              </Button>\n              <p className=\"text-xs text-muted-foreground mt-2 px-2\">\n                ※TSV/CSV両方対応\n              </p>\n            </div>\n          </PopoverContent>\n        </Popover>\n      </div>\n\n      {/* Hidden file inputs */}\n      <input\n        id=\"csv-upload-budget\"\n        type=\"file\"\n        accept=\".tsv,.csv\"\n        className=\"hidden\"\n        onChange={(e) => handleFileSelect(e, 'budget')}\n      />\n      <input\n        id=\"csv-upload-actual\"\n        type=\"file\"\n        accept=\".tsv,.csv\"\n        className=\"hidden\"\n        onChange={(e) => handleFileSelect(e, 'actual')}\n      />\n\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent className=\"max-w-6xl max-h-[80vh] overflow-hidden flex flex-col\">\n          <DialogHeader>\n            <DialogTitle>データインポート確認</DialogTitle>\n            <DialogDescription>\n              以下の内容でインポートします。同じ親項目配下のデータは部分更新されます。\n              <br />\n              <span className=\"text-xs text-muted-foreground\">※TSV形式推奨（カンマ入り数値対応）</span>\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"overflow-auto flex-1\">\n            {parsedData && (\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"sticky left-0 bg-background\">親項目</TableHead>\n                    <TableHead>勘定項目</TableHead>\n                    {parsedData.months.map(month => (\n                      <React.Fragment key={month}>\n                        {(parsedData.mode === 'both' || parsedData.mode === 'budget') && (\n                          <TableHead className=\"text-right\">{month}月予算</TableHead>\n                        )}\n                        {(parsedData.mode === 'both' || parsedData.mode === 'actual') && (\n                          <TableHead className=\"text-right\">{month}月実績</TableHead>\n                        )}\n                      </React.Fragment>\n                    ))}\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {parsedData.items.map((item, idx) => (\n                    <TableRow key={idx}>\n                      <TableCell className=\"sticky left-0 bg-background font-medium\">\n                        {item.parent}\n                      </TableCell>\n                      <TableCell>{item.account_item}</TableCell>\n                      {parsedData.months.map(month => {\n                        const value = item.values.find(v => v.month === month);\n                        return (\n                          <React.Fragment key={month}>\n                            {(parsedData.mode === 'both' || parsedData.mode === 'budget') && (\n                              <TableCell className=\"text-right font-mono\">\n                                {value?.budget?.toLocaleString() ?? '-'}\n                              </TableCell>\n                            )}\n                            {(parsedData.mode === 'both' || parsedData.mode === 'actual') && (\n                              <TableCell className=\"text-right font-mono\">\n                                {value?.actual?.toLocaleString() ?? '-'}\n                              </TableCell>\n                            )}\n                          </React.Fragment>\n                        );\n                      })}\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            )}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)} disabled={isUploading}>\n              キャンセル\n            </Button>\n            <Button onClick={handleImport} disabled={isUploading}>\n              {isUploading ? 'インポート中...' : 'インポート'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1540, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/toggle.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Toggle({\n  className,\n  variant,\n  size,\n  ...props\n}: React.ComponentProps<typeof TogglePrimitive.Root> &\n  VariantProps<typeof toggleVariants>) {\n  return (\n    <TogglePrimitive.Root\n      data-slot=\"toggle\"\n      className={cn(toggleVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Toggle, toggleVariants }\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,MAAM,iBAAiB,IAAA,qPAAG,EACxB,ijBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,SACE;QACJ;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;QACN;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,KAMqB;QANrB,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,GAAG,OAEgC,GANrB;IAOd,qBACE,4TAAC,8XAAoB;QACnB,aAAU;QACV,WAAW,IAAA,iJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 1599, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/toggle-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAGA;AACA;;;AAPA;;;;;AASA,MAAM,mCAAqB,6SAAmB,CAE5C;IACA,MAAM;IACN,SAAS;AACX;AAEA,MAAM,4BAAc,0SAAgB,MAIlC,QAAmD;QAAlD,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,OAAO;yBACjD,4TAAC,uYAAyB;QACxB,KAAK;QACL,WAAW,IAAA,iJAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;kBAET,cAAA,4TAAC,mBAAmB,QAAQ;YAAC,OAAO;gBAAE;gBAAS;YAAK;sBACjD;;;;;;;;;;;;;AAKP,YAAY,WAAW,GAAG,uYAAyB,CAAC,WAAW;AAE/D,MAAM,gCAAkB,GAAA,0SAAgB,UAItC,QAAmD;QAAlD,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,OAAO;;IACjD,MAAM,UAAU,0SAAgB,CAAC;IAEjC,qBACE,4TAAC,uYAAyB;QACxB,KAAK;QACL,WAAW,IAAA,iJAAE,EACX,IAAA,4KAAc,EAAC;YACb,SAAS,QAAQ,OAAO,IAAI;YAC5B,MAAM,QAAQ,IAAI,IAAI;QACxB,IACA;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;;AAEA,gBAAgB,WAAW,GAAG,uYAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1679, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/financials/financials-client.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport FinancialsTable from \"@/components/financials/financials-table\";\nimport AccountItemsImport from \"@/components/financials/account-items-import\";\nimport { Button } from \"@/components/ui/button\";\nimport { Filter, X } from \"lucide-react\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { ToggleGroup, ToggleGroupItem } from \"@/components/ui/toggle-group\";\n\n// Types\ninterface MonthlyData {\n  item_year: number;\n  item_month: number;\n  account_item_id: string;\n  budget: number;\n  actual: number;\n}\n\ninterface DailyData {\n  item_date: string;\n  account_item_id: string;\n  budget: number;\n  actual: number;\n}\n\ninterface AccountItem {\n  id: string;\n  name: string;\n  parent_id: string | null;\n  display_order: number;\n}\n\ninterface ClientAccountItem extends AccountItem {\n  children: ClientAccountItem[];\n}\n\ninterface FinancialsClientProps {\n  monthlyData: MonthlyData[];\n  dailyData: DailyData[];\n  accountItems: AccountItem[];\n  fiscalYearStartMonth: number;\n}\n\ntype DisplayUnit = 'monthly' | 'weekly' | 'daily';\ntype ViewMode = 'all' | 'budget' | 'actual';\n\n// --- Date Helpers ---\nconst getWeek = (d: Date) => {\n  d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n  d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\n  const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n  const weekNo = Math.ceil((((d.getTime() - yearStart.getTime()) / 86400000) + 1) / 7);\n  return { year: d.getUTCFullYear(), week: weekNo };\n};\n\nconst getStartOfWeek = (year: number, week: number) => {\n  const d = new Date(Date.UTC(year, 0, 1 + (week - 1) * 7));\n  d.setUTCDate(d.getUTCDate() + 1 - d.getUTCDay());\n  return d;\n};\n\nconst getEndOfWeek = (year: number, week: number) => {\n  const startOfWeek = getStartOfWeek(year, week);\n  const endOfWeek = new Date(startOfWeek);\n  endOfWeek.setUTCDate(startOfWeek.getUTCDate() + 6);\n  return endOfWeek;\n};\n\nexport default function FinancialsClient({ monthlyData, dailyData, accountItems, fiscalYearStartMonth }: FinancialsClientProps) {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [isFilterOpen, setIsFilterOpen] = useState(false);\n  const [displayUnit, setDisplayUnit] = useState<DisplayUnit>('monthly');\n\n  const mediaId = searchParams.get('media') || 'all';\n  const currentYear = parseInt(searchParams.get('year') || new Date().getFullYear().toString());\n  const [selectedYear, setSelectedYear] = useState(currentYear);\n  const [viewMode, setViewMode] = useState<ViewMode>('all');\n\n  const currentYearNum = new Date().getFullYear();\n  const yearOptions = Array.from({ length: 11 }, (_, i) => currentYearNum - 5 + i);\n\n  const handleApplyFilters = () => {\n    const params = new URLSearchParams(searchParams.toString());\n    params.set('year', selectedYear.toString());\n    router.push(`?${params.toString()}`);\n    setIsFilterOpen(false);\n  };\n\n  const handleResetFilters = () => {\n    setSelectedYear(currentYearNum);\n    setViewMode('all');\n    const params = new URLSearchParams(searchParams.toString());\n    params.delete('year');\n    router.push(`?${params.toString()}`);\n  };\n\n  const handleImportComplete = () => router.refresh();\n\n  const tableData = useMemo(() => {\n    const hierarchy = accountItems.reduce((acc, item) => {\n      acc[item.id] = { ...item, children: [] };\n      return acc;\n    }, {} as { [id: string]: ClientAccountItem });\n\n    const rootItems: ClientAccountItem[] = [];\n    Object.values(hierarchy).forEach(item => {\n      if (item.parent_id && hierarchy[item.parent_id]) {\n        hierarchy[item.parent_id].children.push(item);\n      } else {\n        rootItems.push(item);\n      }\n    });\n    rootItems.forEach(r => r.children.sort((a, b) => a.display_order - b.display_order));\n    rootItems.sort((a, b) => a.display_order - b.display_order);\n\n    const dataByItemId = dailyData.reduce((acc, day) => {\n      if (!acc[day.account_item_id]) acc[day.account_item_id] = [];\n      acc[day.account_item_id].push(day);\n      return acc;\n    }, {} as { [id: string]: DailyData[] });\n\n    const headers: { key: string; label: string }[] = [];\n    const aggregatedData: { [itemId: string]: { [headerKey: string]: { budget: number; actual: number } } } = {};\n\n    const processItem = (item: ClientAccountItem) => {\n      const childrenData = item.children?.flatMap(c => dataByItemId[c.id] || []) || [];\n      const selfData = dataByItemId[item.id] || [];\n      return [...selfData, ...childrenData];\n    };\n    \n    const fiscalStartDate = new Date(selectedYear, fiscalYearStartMonth - 1, 1);\n    const fiscalEndDate = new Date(selectedYear + 1, fiscalYearStartMonth - 1, 0);\n\n    if (displayUnit === 'monthly') {\n      const months = Array.from({ length: 12 }, (_, i) => ((i + fiscalYearStartMonth - 1) % 12) + 1);\n      months.forEach(m => headers.push({ key: `m-${m}`, label: `${m}月` }));\n\n      // Group monthly data by account item\n      const monthlyByItemId = monthlyData.reduce((acc, data) => {\n        if (!acc[data.account_item_id]) acc[data.account_item_id] = [];\n        acc[data.account_item_id].push(data);\n        return acc;\n      }, {} as { [id: string]: MonthlyData[] });\n\n      Object.values(hierarchy).forEach(item => {\n        aggregatedData[item.id] = {};\n        const childrenData = item.children?.flatMap(c => monthlyByItemId[c.id] || []) || [];\n        const selfData = monthlyByItemId[item.id] || [];\n        const relevantData = [...selfData, ...childrenData];\n\n        headers.forEach(h => {\n          const month = parseInt(h.key.split('-')[1]);\n          const monthData = relevantData.filter(d => d.item_month === month);\n          aggregatedData[item.id][h.key] = {\n            budget: monthData.reduce((sum, d) => sum + d.budget, 0),\n            actual: monthData.reduce((sum, d) => sum + d.actual, 0),\n          };\n        });\n      });\n    } else if (displayUnit === 'weekly') {\n      const weekMap = new Map<string, { year: number, week: number, start: Date, end: Date }>();\n      const weekLoopDate = new Date(fiscalStartDate);\n      while (weekLoopDate <= fiscalEndDate) {\n        const { year, week } = getWeek(weekLoopDate);\n        const key = `w-${year}-${week}`;\n        if (!weekMap.has(key)) {\n          const startOfWeek = getStartOfWeek(year, week);\n          const endOfWeek = getEndOfWeek(year, week);\n          weekMap.set(key, { year, week, start: startOfWeek, end: endOfWeek });\n        }\n        weekLoopDate.setDate(weekLoopDate.getDate() + 1);\n      }\n      Array.from(weekMap.values()).sort((a,b) => a.year - b.year || a.week - b.week).forEach(({ year, week, start, end }) => {\n        headers.push({ key: `w-${year}-${week}`, label: `${start.getMonth()+1}/${start.getDate()}-${end.getMonth()+1}/${end.getDate()}` });\n      });\n\n      Object.values(hierarchy).forEach(item => {\n        aggregatedData[item.id] = {};\n        const relevantData = processItem(item);\n        headers.forEach(h => {\n          const [, year, week] = h.key.split('-').map(Number);\n          const startOfWeek = getStartOfWeek(year, week);\n          const endOfWeek = getEndOfWeek(year, week);\n          const weekData = relevantData.filter(d => {\n            const itemDate = new Date(d.item_date);\n            return itemDate >= startOfWeek && itemDate <= endOfWeek;\n          });\n          aggregatedData[item.id][h.key] = {\n            budget: weekData.reduce((sum, d) => sum + d.budget, 0),\n            actual: weekData.reduce((sum, d) => sum + d.actual, 0),\n          };\n        });\n      });\n    } else if (displayUnit === 'daily') {\n      const currentDate = new Date(fiscalStartDate);\n      while (currentDate <= fiscalEndDate) {\n        const year = currentDate.getFullYear();\n        const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n        const day = String(currentDate.getDate()).padStart(2, '0');\n        const dateKey = `${year}-${month}-${day}`;\n        headers.push({ key: `d-${dateKey}`, label: `${currentDate.getMonth()+1}/${currentDate.getDate()}` });\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n\n      Object.values(hierarchy).forEach(item => {\n        aggregatedData[item.id] = {};\n        const relevantData = processItem(item);\n        headers.forEach(h => {\n          const dateKey = h.key.substring(2);\n          const dayData = relevantData.filter(d => d.item_date === dateKey);\n          aggregatedData[item.id][h.key] = {\n            budget: dayData.reduce((sum, d) => sum + d.budget, 0),\n            actual: dayData.reduce((sum, d) => sum + d.actual, 0),\n          };\n        });\n      });\n    }\n\n    return { headers, rows: rootItems, data: aggregatedData };\n\n  }, [monthlyData, dailyData, accountItems, displayUnit, fiscalYearStartMonth, selectedYear]);\n\n  const activeFiltersCount = (selectedYear !== currentYearNum ? 1 : 0) + (viewMode !== 'all' ? 1 : 0);\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        <AccountItemsImport\n          mediaId={mediaId}\n          onImportComplete={handleImportComplete}\n          dataToExport={[]}\n          selectedYear={selectedYear}\n          fiscalYearStartMonth={fiscalYearStartMonth}\n        />\n\n        <Popover open={isFilterOpen} onOpenChange={setIsFilterOpen}>\n          <PopoverTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\" className=\"h-8 gap-2\">\n              <Filter className=\"h-4 w-4\" />\n              Filter\n              {activeFiltersCount > 0 && (\n                <span className=\"ml-1 rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground\">\n                  {activeFiltersCount}\n                </span>\n              )}\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-80\" align=\"start\">\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h4 className=\"font-medium\">フィルター</h4>\n                {activeFiltersCount > 0 && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={handleResetFilters}\n                    className=\"h-auto p-1 text-xs\"\n                  >\n                    リセット\n                  </Button>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-medium\">会計年度</Label>\n                <select\n                  value={selectedYear}\n                  onChange={(e) => setSelectedYear(parseInt(e.target.value))}\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                >\n                  {yearOptions.map((year) => (\n                    <option key={year} value={year}>\n                      {year}年度\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-medium\">表示項目</Label>\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"view-all\"\n                      checked={viewMode === 'all'}\n                      onCheckedChange={() => setViewMode('all')}\n                    />\n                    <label\n                      htmlFor=\"view-all\"\n                      className=\"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                    >\n                      予実比較\n                    </label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"view-budget\"\n                      checked={viewMode === 'budget'}\n                      onCheckedChange={() => setViewMode('budget')}\n                    />\n                    <label\n                      htmlFor=\"view-budget\"\n                      className=\"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                    >\n                      予算のみ\n                    </label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"view-actual\"\n                      checked={viewMode === 'actual'}\n                      onCheckedChange={() => setViewMode('actual')}\n                    />\n                    <label\n                      htmlFor=\"view-actual\"\n                      className=\"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                    >\n                      実績のみ\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2 pt-2\">\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setIsFilterOpen(false)}>\n                  キャンセル\n                </Button>\n                <Button size=\"sm\" onClick={handleApplyFilters}>\n                  適用\n                </Button>\n              </div>\n            </div>\n          </PopoverContent>\n        </Popover>\n\n        {activeFiltersCount > 0 && (\n          <div className=\"flex items-center gap-2\">\n            {selectedYear !== currentYearNum && (\n              <div className=\"flex items-center gap-1 rounded-md bg-secondary px-2 py-1 text-xs\">\n                <span>会計年度: {selectedYear}年度</span>\n                <button\n                  onClick={() => {\n                    setSelectedYear(currentYearNum);\n                    const params = new URLSearchParams(searchParams.toString());\n                    params.delete('year');\n                    router.push(`?${params.toString()}`);\n                  }}\n                  className=\"ml-1 hover:bg-secondary-foreground/10 rounded\"\n                >\n                  <X className=\"h-3 w-3\" />\n                </button>\n              </div>\n            )}\n            {viewMode !== 'all' && (\n              <div className=\"flex items-center gap-1 rounded-md bg-secondary px-2 py-1 text-xs\">\n                <span>\n                  {viewMode === 'budget' ? '予算のみ' : '実績のみ'}\n                </span>\n                <button\n                  onClick={() => setViewMode('all')}\n                  className=\"ml-1 hover:bg-secondary-foreground/10 rounded\"\n                >\n                  <X className=\"h-3 w-3\" />\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n        \n        <ToggleGroup\n          type=\"single\"\n          variant=\"outline\"\n          size=\"sm\"\n          value={displayUnit}\n          onValueChange={(value: DisplayUnit) => value && setDisplayUnit(value)}\n        >\n          <ToggleGroupItem value=\"monthly\">月次</ToggleGroupItem>\n          <ToggleGroupItem value=\"weekly\">週次</ToggleGroupItem>\n          <ToggleGroupItem value=\"daily\">日次</ToggleGroupItem>\n        </ToggleGroup>\n      </div>\n\n      <FinancialsTable\n        headers={tableData.headers}\n        rows={tableData.rows}\n        data={tableData.data}\n        viewMode={viewMode}\n        onDataChange={handleImportComplete}\n      />\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}