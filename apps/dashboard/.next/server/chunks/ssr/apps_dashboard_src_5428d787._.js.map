{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,kVAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6WAAC;QACC,WAAW,IAAA,8IAAE,EACX,6QACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,8XAAoB;AAEnC,MAAM,cAAc,+XAAqB;AAEzC,MAAM,cAAc,+XAAqB;AAEzC,MAAM,8BAAgB,kVAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6WAAC,iYAAuB;QACtB,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,kUACA;QAED,GAAG,KAAK;;YAER;0BACD,6WAAC,8XAAoB;gBAAC,OAAO;0BAC3B,cAAA,6WAAC,uTAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,iYAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,kVAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC,wYAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6WAAC,iTAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,wYAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,kVAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC,0YAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6WAAC,uTAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAChC,0YAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,kVAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6WAAC,gYAAsB;kBACrB,cAAA,6WAAC,iYAAuB;YACtB,KAAK;YACL,WAAW,IAAA,8IAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6WAAC;;;;;8BACD,6WAAC,kYAAwB;oBACvB,WAAW,IAAA,8IAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6WAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,iYAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,kVAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC,+XAAqB;QACpB,KAAK;QACL,WAAW,IAAA,8IAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,+XAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,kVAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6WAAC,8XAAoB;QACnB,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,6WAAC;gBAAK,WAAU;0BACd,cAAA,6WAAC,uYAA6B;8BAC5B,cAAA,6WAAC,iSAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,6WAAC,kYAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,8XAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,kVAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC,mYAAyB;QACxB,KAAK;QACL,WAAW,IAAA,8IAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG,mYAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,kVAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QAAI,WAAU;kBACb,cAAA,6WAAC;YACC,KAAK;YACL,WAAW,IAAA,8IAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,kVAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QAAM,KAAK;QAAK,WAAW,IAAA,8IAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,kVAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QACC,KAAK;QACL,WAAW,IAAA,8IAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,kVAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QACC,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,kVAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QACC,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,kVAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QACC,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,0IACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,kVAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QACC,KAAK;QACL,WAAW,IAAA,8IAAE,EACX,wFACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,kVAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6WAAC;QACC,KAAK;QACL,WAAW,IAAA,8IAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/actions/asp-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { z } from \"zod\";\nimport { createClient } from \"@/lib/supabase/server\";\nimport { aspFormSchema } from \"@/components/agent/asp-form\";\nimport { revalidatePath } from \"next/cache\";\n\nexport async function createAsp(values: z.infer<typeof aspFormSchema>) {\n  const supabase = await createClient();\n\n  // サーバーサイドでのバリデーション\n  const validatedFields = aspFormSchema.safeParse(values);\n  if (!validatedFields.success) {\n    return {\n      error: \"無効なデータです。\",\n    };\n  }\n\n  const { name, login_url, media_id, prompt } = validatedFields.data;\n\n  const { error } = await supabase.from(\"asps\").insert({\n    name,\n    login_url,\n    media_id,\n    prompt,\n    updated_at: new Date().toISOString(),\n  });\n\n  if (error) {\n    console.error(\"Error creating ASP:\", error);\n    return {\n      error: \"ASPの作成に失敗しました。\",\n    };\n  }\n\n  // キャッシュをクリアして一覧を更新\n  revalidatePath(\"/dashboard/agent\");\n\n  return {\n    data: \"ASPを正常に作成しました。\",\n  };\n}\n"],"names":[],"mappings":";;;;;;;IAOsB,YAAA,WAAA,GAAA,IAAA,8WAAA,EAAA,8CAAA,mWAAA,EAAA,KAAA,GAAA,yWAAA,EAAA","debugId":null}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/agent/agent-client.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { MoreHorizontal, PlusCircle } from \"lucide-react\";\nimport { AspForm, aspFormSchema } from \"./asp-form\";\nimport { createAsp } from \"@/actions/asp-actions\";\nimport { z } from \"zod\";\n\n// aspsテーブルの型\ntype Asp = {\n  id: string;\n  name: string;\n  login_url: string | null;\n  media_id: string | null;\n  prompt: string | null;\n  created_at: string;\n  updated_at: string | null;\n  category?: string | null;\n};\n\ntype Media = {\n  id: string;\n  name: string;\n};\n\ninterface AgentClientProps {\n  asps: Asp[];\n  media: Media[];\n}\n\ntype EditingAsp = {\n  id: string;\n  name: string;\n  login_url: string;\n  media_id: string;\n  isNew: boolean;\n};\n\ntype EditingPrompt = {\n  aspId: string;\n  prompt: string;\n};\n\nexport function AgentClient({ asps, media }: AgentClientProps) {\n  const [editingRows, setEditingRows] = useState<EditingAsp[]>([]);\n  const [editingPrompt, setEditingPrompt] = useState<EditingPrompt | null>(null);\n  const [isPromptDialogOpen, setIsPromptDialogOpen] = useState(false);\n  const [isPending, startTransition] = useTransition();\n\n  // メディアIDからメディア名を取得するヘルパー関数\n  const getMediaName = (mediaId: string | null) => {\n    if (!mediaId) return \"-\";\n    const foundMedia = media.find((m) => m.id === mediaId);\n    return foundMedia?.name || \"-\";\n  };\n\n  // 新しい行を追加\n  const handleAddNew = () => {\n    const newRow: EditingAsp = {\n      id: `temp-${Date.now()}`,\n      name: \"\",\n      login_url: \"\",\n      media_id: \"\",\n      isNew: true,\n    };\n    setEditingRows([...editingRows, newRow]);\n  };\n\n  // 基本情報を保存（ASP名、URL、メディア）\n  const handleSaveBasicInfo = (row: EditingAsp) => {\n    if (!row.name || !row.login_url || !row.media_id) {\n      toast.error(\"ASP名、ログインURL、メディアを入力してください\");\n      return;\n    }\n\n    startTransition(async () => {\n      const result = await createAsp({\n        name: row.name,\n        login_url: row.login_url,\n        media_id: row.media_id,\n        prompt: \"\", // 一旦空で保存、後でプロンプトを編集\n      });\n\n      if (result.error) {\n        toast.error(result.error);\n      } else {\n        toast.success(\"ASPを作成しました。プロンプトを設定してください。\");\n        // 編集中の行を削除\n        setEditingRows(editingRows.filter((r) => r.id !== row.id));\n      }\n    });\n  };\n\n  // プロンプト編集を開く\n  const handleOpenPromptEdit = (aspId: string, currentPrompt: string) => {\n    setEditingPrompt({ aspId, prompt: currentPrompt });\n    setIsPromptDialogOpen(true);\n  };\n\n  // プロンプトを保存\n  const handleSavePrompt = () => {\n    if (!editingPrompt || !editingPrompt.prompt.trim()) {\n      toast.error(\"プロンプトを入力してください\");\n      return;\n    }\n\n    // TODO: プロンプト更新のAPI呼び出し\n    toast.success(\"プロンプトを保存しました\");\n    setIsPromptDialogOpen(false);\n    setEditingPrompt(null);\n  };\n\n  // 編集をキャンセル\n  const handleCancelEdit = (rowId: string) => {\n    setEditingRows(editingRows.filter((r) => r.id !== rowId));\n  };\n\n  // 行の値を更新\n  const handleUpdateRow = (rowId: string, field: keyof EditingAsp, value: string) => {\n    setEditingRows(\n      editingRows.map((r) =>\n        r.id === rowId ? { ...r, [field]: value } : r\n      )\n    );\n  };\n\n  return (\n    <>\n      {/* Table */}\n      <div className=\"border rounded-lg\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead className=\"min-w-[150px]\">ASP名</TableHead>\n              <TableHead className=\"min-w-[120px]\">所属メディア</TableHead>\n              <TableHead className=\"min-w-[200px]\">ログインURL</TableHead>\n              <TableHead className=\"w-[120px]\">最終実行</TableHead>\n              <TableHead className=\"w-[80px]\">ステータス</TableHead>\n              <TableHead className=\"w-[50px]\"></TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {/* 既存のASP一覧 */}\n            {asps.map((asp) => (\n              <TableRow key={asp.id}>\n                <TableCell className=\"font-medium\">{asp.name}</TableCell>\n                <TableCell>{getMediaName(asp.media_id)}</TableCell>\n                <TableCell>\n                  {asp.login_url ? (\n                    <a\n                      href={asp.login_url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-blue-600 hover:underline text-sm truncate block max-w-[200px]\"\n                      title={asp.login_url}\n                    >\n                      {asp.login_url}\n                    </a>\n                  ) : (\n                    <span className=\"text-muted-foreground\">-</span>\n                  )}\n                </TableCell>\n                <TableCell>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleOpenPromptEdit(asp.id, asp.prompt || \"\")}\n                    className=\"h-8\"\n                  >\n                    プロンプト編集\n                  </Button>\n                </TableCell>\n                <TableCell className=\"text-sm text-muted-foreground\">-</TableCell>\n                <TableCell>\n                  <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                      <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                        <span className=\"sr-only\">メニューを開く</span>\n                        <MoreHorizontal className=\"h-4 w-4\" />\n                      </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\">\n                      <DropdownMenuItem>今すぐ実行</DropdownMenuItem>\n                      <DropdownMenuItem className=\"text-red-500\">削除</DropdownMenuItem>\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n                </TableCell>\n              </TableRow>\n            ))}\n\n            {/* 編集中の新規行 */}\n            {editingRows.map((row) => (\n              <TableRow key={row.id} className=\"bg-muted/30\">\n                <TableCell>\n                  <Input\n                    placeholder=\"ASP名\"\n                    value={row.name}\n                    onChange={(e) => handleUpdateRow(row.id, \"name\", e.target.value)}\n                    className=\"h-8\"\n                  />\n                </TableCell>\n                <TableCell>\n                  <Select\n                    value={row.media_id}\n                    onValueChange={(value) => handleUpdateRow(row.id, \"media_id\", value)}\n                  >\n                    <SelectTrigger className=\"h-8\">\n                      <SelectValue placeholder=\"選択\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {media.map((m) => (\n                        <SelectItem key={m.id} value={m.id}>\n                          {m.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </TableCell>\n                <TableCell>\n                  <Input\n                    placeholder=\"https://...\"\n                    value={row.login_url}\n                    onChange={(e) => handleUpdateRow(row.id, \"login_url\", e.target.value)}\n                    className=\"h-8\"\n                  />\n                </TableCell>\n                <TableCell colSpan={3} className=\"text-right\">\n                  <div className=\"flex gap-2 justify-end\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => handleCancelEdit(row.id)}\n                      disabled={isPending}\n                    >\n                      キャンセル\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      onClick={() => handleSaveBasicInfo(row)}\n                      disabled={isPending}\n                    >\n                      {isPending ? \"保存中...\" : \"保存\"}\n                    </Button>\n                  </div>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n\n      {/* Add new button outside table - Notion style */}\n      <button\n        onClick={handleAddNew}\n        className=\"mt-2 px-2 py-1.5 text-sm text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded flex items-center gap-2 transition-colors\"\n      >\n        <PlusCircle className=\"h-4 w-4\" />\n        <span>新規</span>\n      </button>\n\n      {/* Prompt Edit Dialog */}\n      <Dialog open={isPromptDialogOpen} onOpenChange={setIsPromptDialogOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>プロンプトを編集</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <Textarea\n              placeholder=\"例:&#10;1. {login_url}にアクセスする&#10;2. ユーザー名フィールドに{SECRET:ASP_USERNAME}を入力&#10;3. パスワードフィールドに{SECRET:ASP_PASSWORD}を入力&#10;4. 「ログイン」ボタンをクリック&#10;5. 「レポート」メニューをクリック&#10;6. 「成果報酬」のテーブルから昨日の確定報酬額を取得\"\n              value={editingPrompt?.prompt || \"\"}\n              onChange={(e) =>\n                setEditingPrompt(\n                  editingPrompt ? { ...editingPrompt, prompt: e.target.value } : null\n                )\n              }\n              className=\"min-h-[400px] font-mono text-sm\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              AIエージェントへの操作指示を自然言語で記述してください。\n              シークレット情報は {`{SECRET:KEY_NAME}`} 形式で記述します。\n            </p>\n            <div className=\"flex justify-end gap-2\">\n              <Button\n                variant=\"ghost\"\n                onClick={() => {\n                  setIsPromptDialogOpen(false);\n                  setEditingPrompt(null);\n                }}\n              >\n                キャンセル\n              </Button>\n              <Button onClick={handleSavePrompt}>保存</Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}