{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/financials/financials-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/apps/dashboard/src/components/financials/financials-client.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/dashboard/src/components/financials/financials-client.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,uYAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkU,GAC/V,gGACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/components/financials/financials-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/apps/dashboard/src/components/financials/financials-client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/dashboard/src/components/financials/financials-client.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,uYAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/t.morimoto/Desktop/me-media-dev-dashboard/apps/dashboard/src/app/dashboard/financials/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\nimport FinancialsClient from \"@/components/financials/financials-client\";\n\nexport const dynamic = 'force-dynamic';\n\ninterface FinancialsPageProps {\n  searchParams: Promise<{\n    media?: string;\n    year?: string;\n  }>;\n}\n\nexport default async function FinancialsPage({ searchParams }: FinancialsPageProps) {\n  const supabase = await createClient();\n  const params = await searchParams;\n\n  // Parallel fetch for settings, monthly data, daily data, and account items\n  const settingPromise = supabase\n    .from('app_settings')\n    .select('value')\n    .eq('key', 'fiscal_year_start_month')\n    .single();\n\n  const mediaParam = params.media || 'all';\n  const year = params.year ? parseInt(params.year) : new Date().getFullYear();\n  const mediaId = mediaParam === 'all' ? null : mediaParam;\n\n  const monthlyDataPromise = supabase.rpc('get_financial_monthly_data', {\n    p_media_id: mediaId,\n    p_fiscal_year: year,\n  });\n\n  const dailyDataPromise = supabase.rpc('get_financial_daily_data', {\n    p_media_id: mediaId,\n    p_fiscal_year: year,\n  });\n\n  const accountItemsPromise = mediaId\n    ? supabase\n        .from('account_items')\n        .select('id, name, parent_id, display_order')\n        .eq('media_id', mediaId)\n    : supabase\n        .from('account_items')\n        .select('id, name, parent_id, display_order');\n\n  const [\n    { data: setting, error: settingError },\n    { data: monthlyData, error: monthlyDataError },\n    { data: dailyData, error: dailyDataError },\n    { data: accountItems, error: accountItemsError }\n  ] = await Promise.all([\n    settingPromise,\n    monthlyDataPromise,\n    dailyDataPromise,\n    accountItemsPromise\n  ]);\n\n  // Default to 6 if not set, but log the error\n  const fiscalYearStartMonth = setting?.value ? parseInt(setting.value) : 6;\n  if (settingError) {\n    console.error(\"Error fetching fiscal year start month setting:\", settingError);\n  }\n\n  if (monthlyDataError || dailyDataError || accountItemsError) {\n    console.error(\"Error fetching page data:\", { monthlyDataError, dailyDataError, accountItemsError });\n    return (\n      <FinancialsClient\n        monthlyData={[]}\n        dailyData={[]}\n        accountItems={[]}\n        fiscalYearStartMonth={fiscalYearStartMonth}\n      />\n    );\n  }\n\n  return (\n    <FinancialsClient\n      monthlyData={monthlyData || []}\n      dailyData={dailyData || []}\n      accountItems={accountItems || []}\n      fiscalYearStartMonth={fiscalYearStartMonth}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAEO,MAAM,UAAU;AASR,eAAe,eAAe,EAAE,YAAY,EAAuB;IAChF,MAAM,WAAW,MAAM,IAAA,qKAAY;IACnC,MAAM,SAAS,MAAM;IAErB,2EAA2E;IAC3E,MAAM,iBAAiB,SACpB,IAAI,CAAC,gBACL,MAAM,CAAC,SACP,EAAE,CAAC,OAAO,2BACV,MAAM;IAET,MAAM,aAAa,OAAO,KAAK,IAAI;IACnC,MAAM,OAAO,OAAO,IAAI,GAAG,SAAS,OAAO,IAAI,IAAI,IAAI,OAAO,WAAW;IACzE,MAAM,UAAU,eAAe,QAAQ,OAAO;IAE9C,MAAM,qBAAqB,SAAS,GAAG,CAAC,8BAA8B;QACpE,YAAY;QACZ,eAAe;IACjB;IAEA,MAAM,mBAAmB,SAAS,GAAG,CAAC,4BAA4B;QAChE,YAAY;QACZ,eAAe;IACjB;IAEA,MAAM,sBAAsB,UACxB,SACG,IAAI,CAAC,iBACL,MAAM,CAAC,sCACP,EAAE,CAAC,YAAY,WAClB,SACG,IAAI,CAAC,iBACL,MAAM,CAAC;IAEd,MAAM,CACJ,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,EACtC,EAAE,MAAM,WAAW,EAAE,OAAO,gBAAgB,EAAE,EAC9C,EAAE,MAAM,SAAS,EAAE,OAAO,cAAc,EAAE,EAC1C,EAAE,MAAM,YAAY,EAAE,OAAO,iBAAiB,EAAE,CACjD,GAAG,MAAM,QAAQ,GAAG,CAAC;QACpB;QACA;QACA;QACA;KACD;IAED,6CAA6C;IAC7C,MAAM,uBAAuB,SAAS,QAAQ,SAAS,QAAQ,KAAK,IAAI;IACxE,IAAI,cAAc;QAChB,QAAQ,KAAK,CAAC,mDAAmD;IACnE;IAEA,IAAI,oBAAoB,kBAAkB,mBAAmB;QAC3D,QAAQ,KAAK,CAAC,6BAA6B;YAAE;YAAkB;YAAgB;QAAkB;QACjG,qBACE,6WAAC,wLAAgB;YACf,aAAa,EAAE;YACf,WAAW,EAAE;YACb,cAAc,EAAE;YAChB,sBAAsB;;;;;;IAG5B;IAEA,qBACE,6WAAC,wLAAgB;QACf,aAAa,eAAe,EAAE;QAC9B,WAAW,aAAa,EAAE;QAC1B,cAAc,gBAAgB,EAAE;QAChC,sBAAsB;;;;;;AAG5B","debugId":null}}]
}