# A8.net シナリオ定義
name: a8net
display_name: "A8.net"
asp_name_in_db: "A8.net"
login_url: https://www.a8.net/

credentials:
  username_key: A8NET_USERNAME
  password_key: A8NET_PASSWORD

# 日次データ取得シナリオ
daily:
  description: "日別レポートから確定報酬額を取得"
  actions:
    - action: navigate
      value: https://www.a8.net/
    - action: wait
      milliseconds: 2000
    - action: fill
      selector: "input[name='login'], input[type='text']:first-of-type"
      value: "{SECRET:A8NET_USERNAME}"
    - action: fill
      selector: "input[name='passwd'], input[type='password']"
      value: "{SECRET:A8NET_PASSWORD}"
    - action: click
      selector: "input[type='submit'][value*='ログイン'], button:has-text('ログイン')"
    - action: wait
      milliseconds: 3000
    - action: click
      selector: "text=レポート"
    - action: wait
      milliseconds: 1000
    - action: click
      selector: "text=成果報酬"
    - action: wait
      milliseconds: 2000
    - action: click
      selector: "text=日別"
    - action: wait
      milliseconds: 2000
    - action: extract
      selector: table
      target: daily_actuals

# 月次データ取得シナリオ
monthly:
  description: "月別レポートから確定報酬額を取得"
  actions:
    - action: navigate
      value: https://www.a8.net/
    - action: wait
      milliseconds: 2000
    - action: fill
      selector: "input[name='login'], input[type='text']:first-of-type"
      value: "{SECRET:A8NET_USERNAME}"
    - action: fill
      selector: "input[name='passwd'], input[type='password']"
      value: "{SECRET:A8NET_PASSWORD}"
    - action: click
      selector: "input[type='submit'][value*='ログイン'], button:has-text('ログイン')"
    - action: wait
      milliseconds: 3000
    - action: click
      selector: "text=レポート"
    - action: wait
      milliseconds: 1000
    - action: click
      selector: "text=成果報酬"
    - action: wait
      milliseconds: 2000
    - action: click
      selector: "text=月別"
    - action: wait
      milliseconds: 2000
    - action: extract
      selector: table
      target: actuals

# リトライ設定
retry:
  max_attempts: 3
  delay_ms: 2000
  retry_on:
    - timeout
    - element_not_found
