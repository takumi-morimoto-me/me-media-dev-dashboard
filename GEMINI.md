# Gemini 作業ルール (me-media-dev-dashboard)

このプロジェクトで Gemini が開発を行う際のルールを以下に定めます。

## 1. **最優先事項：関連ドキュメントの確認**

-   作業を開始する前に、必ず `docs` ディレクトリ内の関連ドキュメントを確認してください。ドキュメントは以下のカテゴリに分類されています。
    -   `docs/01_requirements/`: プロジェクトの目的や機能要件を定義します。
    -   `docs/02_design/`: UI/UXのデザイン原則、デザイントークン、コンポーネント仕様を定義します。
-   これらのドキュメントは、プロダクトの仕様を定義する最上位の資料です。全てのコーディングと判断は、ドキュメントに準拠する必要があります。
-   **ファイル確認の徹底:** ユーザーからファイル名が指定された場合でも、必ずファイルシステム上の実体を直接読み込み、最新の内容を確認してください。

## 2. **開発ワークフローとブランチ戦略**

### **ブランチ構成**
-   `main`: 本番環境にデプロイされる最も安定したブランチ。
-   `develop`: 開発のベースとなるブランチ。全てのフィーチャーブランチは `develop` から作成されます。

### **開発フロー**
1.  **理解 (Understand):** ユーザーの要求と関連ドキュメントの内容を把握します。
2.  **計画 (Plan):** 変更内容の計画を立て、必要であればユーザーに確認します。
3.  **実装 (Implement):** `develop` ブランチから作業用のブランチを作成し、ドキュメントの定義に従ってコードを実装します。
4.  **検証 (Verify):** 実装完了後、必ず以下のコマンドを実行し、コードの品質と一貫性を担保します。
    ```bash
    # ESLint による静的解析
    npm run lint

    # ビルドと型チェック
    npm run build
    ```
5.  **マージ:** 検証をパスしたら、`develop` ブランチへのマージを依頼してください。

## 3. **技術スタックと規約の遵守**

-   **技術選定:** `docs/01_requirements/requirements-definition.md` の `5.2. 技術スタック` に記載されている技術を厳守してください。
    -   **データベース**: **Supabase (PostgreSQL)**
    -   **バックエンド**: **Supabase Edge Functions**
    -   **フロントエンド**: **Next.js (App Router)**, **TypeScript**, **Tailwind CSS**
    -   **UIコンポーネント**: **shadcn/ui** をベースに構築します。
    -   **アイコン**: **lucide-react**
-   **コーディングスタイル:** プロジェクト全体の既存のコーディングスタイル、命名規則、ディレクトリ構造を尊重し、それに倣ってください。

## 4. **安全な操作**

-   ファイルシステムの変更やパッケージのインストールなど、影響の大きいコマンドを実行する前には、必ずその内容と目的をユーザーに説明し、確認を得てください。

## 5. **仮データ管理 (将来的なルール)**

-   **パス**: `src/lib/mock-data/`
-   **目的**: 開発・デモ用の仮データを一元管理し、本番データへの移行時に容易に削除できるようにします。
-   **削除タイミング**: 本番データベースとの連携実装完了後、`rm -rf src/lib/mock-data` で削除します。

## 6. **ドキュメントの更新と保守**

### **6.1. 追加開発時の記録**
-   ドキュメントに明記されていない新機能や仕様を実装する場合は、必ず関連するドキュメント（要件定義やデザイン定義）に内容を追記・更新し、ユーザーに確認を求めてください。

### **6.2. 詳細設計ドキュメントの分割管理**
-   機能が複雑化し、詳細な仕様書が必要になった場合は、以下のルールに従ってファイルを分割・管理してください。
    ```
    docs/
    ├── 01_requirements/
    │   ├── main-requirements.md  (主要な要件)
    │   └── detailed-specs/       (機能ごとの詳細仕様)
    │       └── ...
    └── 02_design/
        ├── design-definition.md
        ├── design-tokens.yaml
        └── ui-specs/             (コンポーネントごとの詳細仕様)
            └── ...
    ```

## 7. **コミットルール**

-   **言語:** GitHubへのコミットメッセージは、必ず**英語**で記述してください。
-   **規約:** `docs/04_development/development-guidelines.md` にある通り、**Conventional Commits** の規約に準拠してください。
    -   例: `feat: add CSV import functionality`
    -   例: `fix: correct calculation logic in summary`
-   **内容:** 1つのコミットが1つの関心事を完結させるようにしてください（アトミックコミット）。

---
このルールは、Gemini が最高のパフォーマンスを発揮し、プロジェクトの持続可能な成長に貢献するためのものです。
