# ダッシュボードページ 実装要件定義

## Phase 1：基本ダッシュボード（MVP）

**ゴール：主要な指標を一覧できる、静的なダッシュボードを迅速に構築する**

まずは、ユーザーがカスタマイズできない固定的な表示で、事業の全体像を素早く把握できる基本的なダッシュボードを実装します。

### 1. レイアウトの実装
-   `レイアウト要件定義書`に基づき、**縦2分割**の基本レイアウトを実装します。
    -   **上段：カードエリア**
    -   **下段：チャートエリア**

### 2. 基本的なフィルター機能
-   ダッシュボード全体に影響する、最低限のグローバルフィルターをヘッダー付近に設置します。
    -   **メディア選択フィルター**: 特定のメディアに絞り込む機能。
    -   **期間選択フィルター**: 「今月」「先月」「今年度」などを選択できるシンプルなドロップダウン。

### 3. 固定コンテンツの表示
-   **カードエリア**:
    -   最も重要ないくつかのKPI（例：全社売上、全社費用、利益、利益率）を**固定で表示**します。この時点ではカードの選択機能は実装しません。
-   **チャートエリア**:
    -   レイアウトは**2分割に固定**し、最も代表的な2つのグラフ（例：「月次売上推移」「費用構成比」）を**固定で表示**します。この時点ではレイアウトやチャートの選択機能は実装しません。

---

## Phase 2：インタラクティブ分析機能

**ゴール：ユーザーが能動的にデータを深掘りできる、動的な分析ツールを実装する**

静的な表示だったMVPに、インタラクティブな操作を追加し、ユーザーが「なぜ？」を追求できる本格的な分析機能を実装します。

### 1. フィルター機能の強化
-   Phase 1のフィルターを、以下の通り拡張します。
    -   **複数メディア選択**: 複数のメディアを同時に選択して、合算した数値を表示できるようにします。
    -   **勘定項目フィルター**: 特定の勘定項目（大項目・小項目）でデータを絞り込めるようにします。
    -   **ASPフィルター**: データソースとなっているASPで絞り込めるようにします。

### 2. 柔軟な期間設定と期間比較機能
-   シンプルな期間選択を、高機能な**日付範囲ピッカー**に置き換えます。「過去30日間」のようなプリセットや、自由な日付範囲を選択できるようにします。
-   **期間比較機能**: 現在選択している期間を、**比較対象の期間**（例：前の期間、前年の同期間など）と並べて比較できる機能を追加します。カードやグラフに比較期間の数値や増減率が表示されるようになります。

### 3. インタラクティブなドリルダウン
-   グラフの要素をクリックすることで、ダッシュボード全体のフィルターが動的に変更される機能を実装します。
-   **例**: 「メディア別売上」の円グラフで「Aメディア」のスライスをクリックすると、ページ全体の表示が「Aメディア」のデータのみに絞り込まれる。

---

## Phase 3：高度なカスタマイズと連携機能

**ゴール：ユーザー一人ひとりのニーズに合わせて、ダッシュボードを最適化・活用できる機能を提供する**

分析機能をさらに強化し、ユーザーが自分専用のダッシュボードを作り上げ、その結果を外部で活用できるようにします。

### 1. カードエリアのカスタマイズ
-   ユーザーが表示したいKPIカードを**選択・非表示**にできる機能を追加します。
-   ドラッグ＆ドロップで**カードの表示順を自由に入れ替え**られるようにします。

### 2. チャートエリアの完全なカスタマイズ
-   `レイアウト要件定義書`で定めた、以下の機能を実装します。
    -   **レイアウト選択機能**: チャートエリアの分割数を「1分割」「2分割」「4分割」からユーザーが選択できるようにします。
    -   **チャート選択機能**: 分割された各スロットに、表示したいグラフをライブラリから選択して配置できるようにします。

### 3. 保存・エクスポート機能
-   **カスタムビューの保存**: ユーザーがカスタマイズしたカードやチャートの配置を、「マイダッシュボード」として保存・復元できるようにします。
-   **エクスポート機能**:
    -   各チャートを画像（PNG）としてダウンロードできるようにします。
    -   各チャートの元データをCSVファイルとしてダウンロードできるようにします。
